
import math as m  # Импортируем модуль math для работы с математическими функциями

# --------------------- Ввод и начальные установки ---------------------
# Ввод требуемой точности с клавиатуры
Eps = float(input("Введите точность EPS: "))

# Задаём массив значений аргумента X для тестирования
X = [-0.98, -0.5, 0.1, 0.5, 0.95]

# Максимальное число итераций для защиты от зацикливания
MAX_COUNT = 2500

# Вывод заголовка таблицы результатов
print(f"{'N':<3}{'X':<10}{'S(x)':<20}{'K':<10}{'F(x)':<20}{'|S(x) - F(x)|':<20}")
print("=" * 80)

# --------------------- Основной цикл по всем x из массива ---------------------
for j in range(len(X)):
    x = X[j]  # Текущее значение x
    
    # Для x = 0 (особый случай): 1 - cos(0) = 0, ряд равен 0
    if x == 0:
        sum_series = 0.0
        k = 0  # Итераций не проводится
    else:
        # --------------------- Инициализация ряда ---------------------
        # Первое слагаемое ряда: s1 = x^2 / 2! (2! = 2)
        term = x**2 / m.factorial(2)
        sum_series = term  # Начальная сумма ряда равна первому слагаемому
        k = 1  # Счётчик итераций (первый шаг)
        
        # --------------------- Вычисление ряда с помощью рекурсии ---------------------
        # Рекуррентное соотношение:
        # s_n = s_(n-1) * [ -x^2 / ((2*n-1)*(2*n)) ]
        # Здесь n = k + 1, поэтому для текущей итерации используем (2*k+1) и (2*k+2)
        while abs(term) >= Eps and k < MAX_COUNT:
            term *= - x**2 / ((2 * k + 1) * (2 * k + 2))
            sum_series += term  # Прибавляем очередное слагаемое к сумме
            k += 1  # Увеличиваем счётчик итераций
    
    # --------------------- Вычисление контрольного значения ---------------------
    # Контрольная функция: F(x) = 1 - cos(x)
    func = 1 - m.cos(x)
    
    # Абсолютная разница между суммой ряда и контрольным значением
    diff = abs(sum_series - func)
    
    # --------------------- Вывод строки таблицы для текущего x ---------------------
    print(f"{j:<3}{x:<10}{sum_series:<20.10f}{k:<10}{func:<20.10f}{diff:<20.10f}")
